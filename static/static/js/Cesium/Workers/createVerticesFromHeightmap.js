/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2013 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
!function(){define("Core/freezeObject",[],function(){"use strict";var e=Object.freeze;return"undefined"==typeof e&&(e=function(e){return e}),e}),define("Core/defaultValue",["./freezeObject"],function(e){"use strict";var t=function(e,t){return"undefined"!=typeof e?e:t};return t.EMPTY_OBJECT=e({}),t}),define("Core/DeveloperError",[],function(){"use strict";var e=function(e){this.name="DeveloperError",this.message=e,this.error=new Error,this.stack=this.error.stack};return e.prototype.toString=function(){var e=this.name+": "+this.message;return e+="undefined"!=typeof this.stack?"\n"+this.stack.toString():"\n"+this.error.toString()},e}),define("Core/Cartesian3",["./defaultValue","./DeveloperError","./freezeObject"],function(e,t,n){"use strict";var r=function(t,n,r){this.x=e(t,0),this.y=e(n,0),this.z=e(r,0)};r.fromSpherical=function(n,i){if("undefined"==typeof n)throw new t("spherical is required");"undefined"==typeof i&&(i=new r);var o=n.clock,u=n.cone,a=e(n.magnitude,1),f=a*Math.sin(u);return i.x=f*Math.cos(o),i.y=f*Math.sin(o),i.z=a*Math.cos(u),i},r.fromArray=function(n,i,o){if("undefined"==typeof n)throw new t("values is required.");if(i+3>n.length)throw new t("offset + 3 is greater than the length of the array.");return i=e(i,0),"undefined"==typeof o&&(o=new r),o.x=n[i+0],o.y=n[i+1],o.z=n[i+2],o},r.fromElements=function(e,t,n,i){return"undefined"==typeof i?new r(e,t,n):(i.x=e,i.y=t,i.z=n,i)},r.clone=function(e,t){return"undefined"==typeof e?void 0:"undefined"==typeof t?new r(e.x,e.y,e.z):(t.x=e.x,t.y=e.y,t.z=e.z,t)},r.fromCartesian4=r.clone,r.getMaximumComponent=function(e){if("undefined"==typeof e)throw new t("cartesian is required");return Math.max(e.x,e.y,e.z)},r.getMinimumComponent=function(e){if("undefined"==typeof e)throw new t("cartesian is required");return Math.min(e.x,e.y,e.z)},r.magnitudeSquared=function(e){if("undefined"==typeof e)throw new t("cartesian is required");return e.x*e.x+e.y*e.y+e.z*e.z},r.magnitude=function(e){return Math.sqrt(r.magnitudeSquared(e))};var i=new r;r.distance=function(e,n){if("undefined"==typeof e||"undefined"==typeof n)throw new t("left and right are required.");return r.subtract(e,n,i),r.magnitude(i)},r.normalize=function(e,n){if("undefined"==typeof e)throw new t("cartesian is required");var i=r.magnitude(e);return"undefined"==typeof n?new r(e.x/i,e.y/i,e.z/i):(n.x=e.x/i,n.y=e.y/i,n.z=e.z/i,n)},r.dot=function(e,n){if("undefined"==typeof e)throw new t("left is required");if("undefined"==typeof n)throw new t("right is required");return e.x*n.x+e.y*n.y+e.z*n.z},r.multiplyComponents=function(e,n,i){if("undefined"==typeof e)throw new t("left is required");if("undefined"==typeof n)throw new t("right is required");return"undefined"==typeof i?new r(e.x*n.x,e.y*n.y,e.z*n.z):(i.x=e.x*n.x,i.y=e.y*n.y,i.z=e.z*n.z,i)},r.add=function(e,n,i){if("undefined"==typeof e)throw new t("left is required");if("undefined"==typeof n)throw new t("right is required");return"undefined"==typeof i?new r(e.x+n.x,e.y+n.y,e.z+n.z):(i.x=e.x+n.x,i.y=e.y+n.y,i.z=e.z+n.z,i)},r.subtract=function(e,n,i){if("undefined"==typeof e)throw new t("left is required");if("undefined"==typeof n)throw new t("right is required");return"undefined"==typeof i?new r(e.x-n.x,e.y-n.y,e.z-n.z):(i.x=e.x-n.x,i.y=e.y-n.y,i.z=e.z-n.z,i)},r.multiplyByScalar=function(e,n,i){if("undefined"==typeof e)throw new t("cartesian is required");if("number"!=typeof n)throw new t("scalar is required and must be a number.");return"undefined"==typeof i?new r(e.x*n,e.y*n,e.z*n):(i.x=e.x*n,i.y=e.y*n,i.z=e.z*n,i)},r.divideByScalar=function(e,n,i){if("undefined"==typeof e)throw new t("cartesian is required");if("number"!=typeof n)throw new t("scalar is required and must be a number.");return"undefined"==typeof i?new r(e.x/n,e.y/n,e.z/n):(i.x=e.x/n,i.y=e.y/n,i.z=e.z/n,i)},r.negate=function(e,n){if("undefined"==typeof e)throw new t("cartesian is required");return"undefined"==typeof n?new r(-e.x,-e.y,-e.z):(n.x=-e.x,n.y=-e.y,n.z=-e.z,n)},r.abs=function(e,n){if("undefined"==typeof e)throw new t("cartesian is required");return"undefined"==typeof n?new r(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z)):(n.x=Math.abs(e.x),n.y=Math.abs(e.y),n.z=Math.abs(e.z),n)};var o=new r;r.lerp=function(e,n,i,u){if("undefined"==typeof e)throw new t("start is required.");if("undefined"==typeof n)throw new t("end is required.");if("number"!=typeof i)throw new t("t is required and must be a number.");return r.multiplyByScalar(n,i,o),u=r.multiplyByScalar(e,1-i,u),r.add(o,u,u)};var u=new r,a=new r;r.angleBetween=function(e,n){if("undefined"==typeof e)throw new t("left is required");if("undefined"==typeof n)throw new t("right is required");r.normalize(e,u),r.normalize(n,a);var i=r.dot(u,a),o=r.cross(u,a,u).magnitude();return Math.atan2(o,i)};var f=new r;return r.mostOrthogonalAxis=function(e,n){if("undefined"==typeof e)throw new t("cartesian is required.");var i=r.normalize(e,f);return r.abs(i,i),n=i.x<=i.y?i.x<=i.z?r.clone(r.UNIT_X,n):r.clone(r.UNIT_Z,n):i.y<=i.z?r.clone(r.UNIT_Y,n):r.clone(r.UNIT_Z,n)},r.equals=function(e,t){return e===t||"undefined"!=typeof e&&"undefined"!=typeof t&&e.x===t.x&&e.y===t.y&&e.z===t.z},r.equalsEpsilon=function(e,n,r){if("number"!=typeof r)throw new t("epsilon is required and must be a number.");return e===n||"undefined"!=typeof e&&"undefined"!=typeof n&&Math.abs(e.x-n.x)<=r&&Math.abs(e.y-n.y)<=r&&Math.abs(e.z-n.z)<=r},r.cross=function(e,n,i){if("undefined"==typeof e)throw new t("left is required");if("undefined"==typeof n)throw new t("right is required");var o=e.x,u=e.y,a=e.z,f=n.x,s=n.y,d=n.z,h=u*d-a*s,p=a*f-o*d,c=o*s-u*f;return"undefined"==typeof i?new r(h,p,c):(i.x=h,i.y=p,i.z=c,i)},r.ZERO=n(new r(0,0,0)),r.UNIT_X=n(new r(1,0,0)),r.UNIT_Y=n(new r(0,1,0)),r.UNIT_Z=n(new r(0,0,1)),r.prototype.getMaximumComponent=function(){return r.getMaximumComponent(this)},r.prototype.getMinimumComponent=function(){return r.getMinimumComponent(this)},r.prototype.clone=function(e){return r.clone(this,e)},r.prototype.magnitudeSquared=function(){return r.magnitudeSquared(this)},r.prototype.magnitude=function(){return r.magnitude(this)},r.prototype.normalize=function(e){return r.normalize(this,e)},r.prototype.dot=function(e){return r.dot(this,e)},r.prototype.multiplyComponents=function(e,t){return r.multiplyComponents(this,e,t)},r.prototype.add=function(e,t){return r.add(this,e,t)},r.prototype.subtract=function(e,t){return r.subtract(this,e,t)},r.prototype.multiplyByScalar=function(e,t){return r.multiplyByScalar(this,e,t)},r.prototype.divideByScalar=function(e,t){return r.divideByScalar(this,e,t)},r.prototype.negate=function(e){return r.negate(this,e)},r.prototype.abs=function(e){return r.abs(this,e)},r.prototype.lerp=function(e,t,n){return r.lerp(this,e,t,n)},r.prototype.angleBetween=function(e){return r.angleBetween(this,e)},r.prototype.mostOrthogonalAxis=function(e){return r.mostOrthogonalAxis(this,e)},r.prototype.equals=function(e){return r.equals(this,e)},r.prototype.equalsEpsilon=function(e,t){return r.equalsEpsilon(this,e,t)},r.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},r.prototype.cross=function(e,t){return r.cross(this,e,t)},r}),define("Core/Cartesian4",["./defaultValue","./DeveloperError","./freezeObject"],function(e,t,n){"use strict";var r=function(t,n,r,i){this.x=e(t,0),this.y=e(n,0),this.z=e(r,0),this.w=e(i,0)};r.fromArray=function(n,i,o){if("undefined"==typeof n)throw new t("values is required.");if(i+4>n.length)throw new t("offset + 4 is greater than the length of the array.");return i=e(i,0),"undefined"==typeof o&&(o=new r),o.x=n[i+0],o.y=n[i+1],o.z=n[i+2],o.w=n[i+3],o},r.fromElements=function(e,t,n,i,o){return"undefined"==typeof o?new r(e,t,n,i):(o.x=e,o.y=t,o.z=n,o.w=i,o)},r.clone=function(e,t){return"undefined"==typeof e?void 0:"undefined"==typeof t?new r(e.x,e.y,e.z,e.w):(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t)},r.getMaximumComponent=function(e){if("undefined"==typeof e)throw new t("cartesian is required");return Math.max(e.x,e.y,e.z,e.w)},r.getMinimumComponent=function(e){if("undefined"==typeof e)throw new t("cartesian is required");return Math.min(e.x,e.y,e.z,e.w)},r.magnitudeSquared=function(e){if("undefined"==typeof e)throw new t("cartesian is required");return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},r.magnitude=function(e){return Math.sqrt(r.magnitudeSquared(e))};var i=new r;r.distance=function(e,n){if("undefined"==typeof e||"undefined"==typeof n)throw new t("left and right are required.");return r.subtract(e,n,i),r.magnitude(i)},r.normalize=function(e,n){if("undefined"==typeof e)throw new t("cartesian is required");var i=r.magnitude(e);return"undefined"==typeof n?new r(e.x/i,e.y/i,e.z/i,e.w/i):(n.x=e.x/i,n.y=e.y/i,n.z=e.z/i,n.w=e.w/i,n)},r.dot=function(e,n){if("undefined"==typeof e)throw new t("left is required");if("undefined"==typeof n)throw new t("right is required");return e.x*n.x+e.y*n.y+e.z*n.z+e.w*n.w},r.multiplyComponents=function(e,n,i){if("undefined"==typeof e)throw new t("left is required");if("undefined"==typeof n)throw new t("right is required");return"undefined"==typeof i?new r(e.x*n.x,e.y*n.y,e.z*n.z,e.w*n.w):(i.x=e.x*n.x,i.y=e.y*n.y,i.z=e.z*n.z,i.w=e.w*n.w,i)},r.add=function(e,n,i){if("undefined"==typeof e)throw new t("left is required");if("undefined"==typeof n)throw new t("right is required");return"undefined"==typeof i?new r(e.x+n.x,e.y+n.y,e.z+n.z,e.w+n.w):(i.x=e.x+n.x,i.y=e.y+n.y,i.z=e.z+n.z,i.w=e.w+n.w,i)},r.subtract=function(e,n,i){if("undefined"==typeof e)throw new t("left is required");if("undefined"==typeof n)throw new t("right is required");return"undefined"==typeof i?new r(e.x-n.x,e.y-n.y,e.z-n.z,e.w-n.w):(i.x=e.x-n.x,i.y=e.y-n.y,i.z=e.z-n.z,i.w=e.w-n.w,i)},r.multiplyByScalar=function(e,n,i){if("undefined"==typeof e)throw new t("cartesian is required");if("number"!=typeof n)throw new t("scalar is required and must be a number.");return"undefined"==typeof i?new r(e.x*n,e.y*n,e.z*n,e.w*n):(i.x=e.x*n,i.y=e.y*n,i.z=e.z*n,i.w=e.w*n,i)},r.divideByScalar=function(e,n,i){if("undefined"==typeof e)throw new t("cartesian is required");if("number"!=typeof n)throw new t("scalar is required and must be a number.");return"undefined"==typeof i?new r(e.x/n,e.y/n,e.z/n,e.w/n):(i.x=e.x/n,i.y=e.y/n,i.z=e.z/n,i.w=e.w/n,i)},r.negate=function(e,n){if("undefined"==typeof e)throw new t("cartesian is required");return"undefined"==typeof n?new r(-e.x,-e.y,-e.z,-e.w):(n.x=-e.x,n.y=-e.y,n.z=-e.z,n.w=-e.w,n)},r.abs=function(e,n){if("undefined"==typeof e)throw new t("cartesian is required");return"undefined"==typeof n?new r(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z),Math.abs(e.w)):(n.x=Math.abs(e.x),n.y=Math.abs(e.y),n.z=Math.abs(e.z),n.w=Math.abs(e.w),n)};var o=new r;r.lerp=function(e,n,i,u){if("undefined"==typeof e)throw new t("start is required.");if("undefined"==typeof n)throw new t("end is required.");if("number"!=typeof i)throw new t("t is required and must be a number.");return r.multiplyByScalar(n,i,o),u=r.multiplyByScalar(e,1-i,u),r.add(o,u,u)};var u=new r;return r.mostOrthogonalAxis=function(e,n){if("undefined"==typeof e)throw new t("cartesian is required.");var i=r.normalize(e,u);return r.abs(i,i),n=i.x<=i.y?i.x<=i.z?i.x<=i.w?r.clone(r.UNIT_X,n):r.clone(r.UNIT_W,n):i.z<=i.w?r.clone(r.UNIT_Z,n):r.clone(r.UNIT_W,n):i.y<=i.z?i.y<=i.w?r.clone(r.UNIT_Y,n):r.clone(r.UNIT_W,n):i.z<=i.w?r.clone(r.UNIT_Z,n):r.clone(r.UNIT_W,n)},r.equals=function(e,t){return e===t||"undefined"!=typeof e&&"undefined"!=typeof t&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},r.equalsEpsilon=function(e,n,r){if("number"!=typeof r)throw new t("epsilon is required and must be a number.");return e===n||"undefined"!=typeof e&&"undefined"!=typeof n&&Math.abs(e.x-n.x)<=r&&Math.abs(e.y-n.y)<=r&&Math.abs(e.z-n.z)<=r&&Math.abs(e.w-n.w)<=r},r.ZERO=n(new r(0,0,0,0)),r.UNIT_X=n(new r(1,0,0,0)),r.UNIT_Y=n(new r(0,1,0,0)),r.UNIT_Z=n(new r(0,0,1,0)),r.UNIT_W=n(new r(0,0,0,1)),r.prototype.getMaximumComponent=function(){return r.getMaximumComponent(this)},r.prototype.getMinimumComponent=function(){return r.getMinimumComponent(this)},r.prototype.clone=function(e){return r.clone(this,e)},r.prototype.magnitudeSquared=function(){return r.magnitudeSquared(this)},r.prototype.magnitude=function(){return r.magnitude(this)},r.prototype.normalize=function(e){return r.normalize(this,e)},r.prototype.dot=function(e){return r.dot(this,e)},r.prototype.multiplyComponents=function(e,t){return r.multiplyComponents(this,e,t)},r.prototype.add=function(e,t){return r.add(this,e,t)},r.prototype.subtract=function(e,t){return r.subtract(this,e,t)},r.prototype.multiplyByScalar=function(e,t){return r.multiplyByScalar(this,e,t)},r.prototype.divideByScalar=function(e,t){return r.divideByScalar(this,e,t)},r.prototype.negate=function(e){return r.negate(this,e)},r.prototype.abs=function(e){return r.abs(this,e)},r.prototype.lerp=function(e,t,n){return r.lerp(this,e,t,n)},r.prototype.mostOrthogonalAxis=function(e){return r.mostOrthogonalAxis(this,e)},r.prototype.equals=function(e){return r.equals(this,e)},r.prototype.equalsEpsilon=function(e,t){return r.equalsEpsilon(this,e,t)},r.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},r}),define("Core/Math",["./defaultValue","./DeveloperError"],function(e,t){"use strict";var n={};n.EPSILON1=.1,n.EPSILON2=.01,n.EPSILON3=.001,n.EPSILON4=1e-4,n.EPSILON5=1e-5,n.EPSILON6=1e-6,n.EPSILON7=1e-7,n.EPSILON8=1e-8,n.EPSILON9=1e-9,n.EPSILON10=1e-10,n.EPSILON11=1e-11,n.EPSILON12=1e-12,n.EPSILON13=1e-13,n.EPSILON14=1e-14,n.EPSILON15=1e-15,n.EPSILON16=1e-16,n.EPSILON17=1e-17,n.EPSILON18=1e-18,n.EPSILON19=1e-19,n.EPSILON20=1e-20,n.GRAVITATIONALPARAMETER=3986004418e5,n.SOLAR_RADIUS=6995e5,n.sign=function(e){return e>0?1:0>e?-1:0},n.sinh=function(e){var t=Math.pow(Math.E,e),n=Math.pow(Math.E,-1*e);return.5*(t-n)},n.cosh=function(e){var t=Math.pow(Math.E,e),n=Math.pow(Math.E,-1*e);return.5*(t+n)},n.lerp=function(e,t,n){return(1-n)*e+n*t},n.PI=Math.PI,n.ONE_OVER_PI=1/Math.PI,n.PI_OVER_TWO=.5*Math.PI,n.PI_OVER_THREE=Math.PI/3,n.PI_OVER_FOUR=Math.PI/4,n.PI_OVER_SIX=Math.PI/6,n.THREE_PI_OVER_TWO=.5*3*Math.PI,n.TWO_PI=2*Math.PI,n.ONE_OVER_TWO_PI=1/(2*Math.PI),n.RADIANS_PER_DEGREE=Math.PI/180,n.DEGREES_PER_RADIAN=180/Math.PI,n.RADIANS_PER_ARCSECOND=n.RADIANS_PER_DEGREE/3600,n.toRadians=function(e){return e*n.RADIANS_PER_DEGREE},n.toDegrees=function(e){return e*n.DEGREES_PER_RADIAN},n.convertLongitudeRange=function(e){var t=n.TWO_PI,r=e-Math.floor(e/t)*t;return r<-Math.PI?r+t:r>=Math.PI?r-t:r},n.negativePiToPi=function(e){for(var t=n.EPSILON10,r=n.PI,i=n.TWO_PI;-(r+t)>e;)e+=i;if(-r>e)return-r;for(;e>r+t;)e-=i;return e>r?r:e},n.zeroToTwoPi=function(e){var t=e%n.TWO_PI;return 0>t?(t+n.TWO_PI)%n.TWO_PI:t},n.equalsEpsilon=function(t,n,r){return r=e(r,0),Math.abs(t-n)<=r};var r=[1];return n.factorial=function(e){if("number"!=typeof e||0>e)throw new t("A number greater than or equal to 0 is required.");var n=r.length;if(e>=n)for(var i=r[n-1],o=n;e>=o;o++)r.push(i*o);return r[e]},n.incrementWrap=function(n,r,i){if(i=e(i,0),i>=r)throw new t("Maximum value must be greater than minimum value.");return++n,n>r&&(n=i),n},n.isPowerOfTwo=function(n){if("number"!=typeof n||0>n)throw new t("A number greater than or equal to 0 is required.");var r=e(n,0);return 0!==r&&0===(r&r-1)},n.clamp=function(e,t,n){return t>e?t:e>n?n:e},n}),define("Core/Cartographic",["./defaultValue","./DeveloperError","./freezeObject","./Math"],function(e,t,n,r){"use strict";var i=function(t,n,r){this.longitude=e(t,0),this.latitude=e(n,0),this.height=e(r,0)};return i.fromDegrees=function(t,n,o,u){return t=r.toRadians(e(t,0)),n=r.toRadians(e(n,0)),o=e(o,0),"undefined"==typeof u?new i(t,n,o):(u.longitude=t,u.latitude=n,u.height=o,u)},i.clone=function(e,t){return"undefined"==typeof e?void 0:"undefined"==typeof t?new i(e.longitude,e.latitude,e.height):(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t)},i.equals=function(e,t){return e===t||"undefined"!=typeof e&&"undefined"!=typeof t&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},i.equalsEpsilon=function(e,n,r){if("number"!=typeof r)throw new t("epsilon is required and must be a number.");return e===n||"undefined"!=typeof e&&"undefined"!=typeof n&&Math.abs(e.longitude-n.longitude)<=r&&Math.abs(e.latitude-n.latitude)<=r&&Math.abs(e.height-n.height)<=r},i.toString=function(e){if("undefined"==typeof e)throw new t("cartographic is required");return"("+e.longitude+", "+e.latitude+", "+e.height+")"},i.ZERO=n(new i(0,0,0)),i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,t){return i.equalsEpsilon(this,e,t)},i.prototype.toString=function(){return i.toString(this)},i}),define("Core/Ellipsoid",["./freezeObject","./defaultValue","./DeveloperError","./Math","./Cartesian3","./Cartographic"],function(e,t,n,r,i,o){"use strict";var u=function(e,o,u){if(e=t(e,0),o=t(o,0),u=t(u,0),0>e||0>o||0>u)throw new n("All radii components must be greater than or equal to zero.");this._radii=new i(e,o,u),this._radiiSquared=new i(e*e,o*o,u*u),this._radiiToTheFourth=new i(e*e*e*e,o*o*o*o,u*u*u*u),this._oneOverRadii=new i(0===e?0:1/e,0===o?0:1/o,0===u?0:1/u),this._oneOverRadiiSquared=new i(0===e?0:1/(e*e),0===o?0:1/(o*o),0===u?0:1/(u*u)),this._minimumRadius=Math.min(e,o,u),this._maximumRadius=Math.max(e,o,u),this._centerToleranceSquared=r.EPSILON1};u.clone=function(e,t){if("undefined"==typeof e)return void 0;var n=e._radii;return"undefined"==typeof t?new u(n.x,n.y,n.z):(i.clone(n,t._radii),i.clone(e._radiiSquared,t._radiiSquared),i.clone(e._radiiToTheFourth,t._radiiToTheFourth),i.clone(e._oneOverRadii,t._oneOverRadii),i.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t)},u.fromCartesian3=function(e){return"undefined"==typeof e?new u:new u(e.x,e.y,e.z)},u.WGS84=e(new u(6378137,6378137,6356752.314245179)),u.UNIT_SPHERE=e(new u(1,1,1)),u.prototype.getRadii=function(){return this._radii},u.prototype.getRadiiSquared=function(){return this._radiiSquared},u.prototype.getRadiiToTheFourth=function(){return this._radiiToTheFourth},u.prototype.getOneOverRadii=function(){return this._oneOverRadii},u.prototype.getOneOverRadiiSquared=function(){return this._oneOverRadiiSquared},u.prototype.getMinimumRadius=function(){return this._minimumRadius},u.prototype.getMaximumRadius=function(){return this._maximumRadius},u.prototype.clone=function(e){return u.clone(this,e)},u.prototype.geocentricSurfaceNormal=i.normalize,u.prototype.geodeticSurfaceNormalCartographic=function(e,t){if("undefined"==typeof e)throw new n("cartographic is required.");var r=e.longitude,o=e.latitude,u=Math.cos(o),a=u*Math.cos(r),f=u*Math.sin(r),s=Math.sin(o);return"undefined"==typeof t&&(t=new i),t.x=a,t.y=f,t.z=s,i.normalize(t,t)},u.prototype.geodeticSurfaceNormal=function(e,t){return t=i.multiplyComponents(e,this._oneOverRadiiSquared,t),i.normalize(t,t)};var a=new i,f=new i;u.prototype.cartographicToCartesian=function(e,t){var n=a,r=f;this.geodeticSurfaceNormalCartographic(e,n),i.multiplyComponents(this._radiiSquared,n,r);var o=Math.sqrt(i.dot(n,r));return i.divideByScalar(r,o,r),i.multiplyByScalar(n,e.height,n),i.add(r,n,t)},u.prototype.cartographicArrayToCartesianArray=function(e,t){if("undefined"==typeof e)throw new n("cartographics is required.");var r=e.length;"undefined"==typeof t?t=new Array(r):t.length=r;for(var i=0;r>i;i++)t[i]=this.cartographicToCartesian(e[i],t[i]);return t};var s=new i,d=new i,h=new i;u.prototype.cartesianToCartographic=function(e,t){var n=this.scaleToGeodeticSurface(e,d);if("undefined"==typeof n)return void 0;var u=this.geodeticSurfaceNormal(n,s),a=i.subtract(e,n,h),f=Math.atan2(u.y,u.x),p=Math.asin(u.z),c=r.sign(i.dot(a,e))*i.magnitude(a);return"undefined"==typeof t?new o(f,p,c):(t.longitude=f,t.latitude=p,t.height=c,t)},u.prototype.cartesianArrayToCartographicArray=function(e,t){if("undefined"==typeof e)throw new n("cartesians is required.");var r=e.length;"undefined"==typeof t?t=new Array(r):t.length=r;for(var i=0;r>i;++i)t[i]=this.cartesianToCartographic(e[i],t[i]);return t};var p,c=new i;return u.prototype.scaleToGeodeticSurface=function(e,t){if("undefined"==typeof e)throw new n("cartesian is required.");var o=e.x,u=e.y,a=e.z,f=this._oneOverRadii,s=f.x,d=f.y,h=f.z,y=o*o*s*s,w=u*u*d*d,l=a*a*h*h,m=y+w+l,g=Math.sqrt(1/m),x=i.multiplyByScalar(e,g,p);if(m<this._centerToleranceSquared)return isFinite(g)?i.clone(x,t):void 0;var q=this._oneOverRadiiSquared,v=q.x,z=q.y,b=q.z,M=c;M.x=2*x.x*v,M.y=2*x.y*z,M.z=2*x.z*b;var S,E,O,R,C,_,T,P,I,N,U,A=(1-g)*i.magnitude(e)/(.5*i.magnitude(M)),L=0;do{A-=L,O=1/(1+A*v),R=1/(1+A*z),C=1/(1+A*b),_=O*O,T=R*R,P=C*C,I=_*O,N=T*R,U=P*C,S=y*_+w*T+l*P-1,E=y*I*v+w*N*z+l*U*b;var W=-2*E;L=S/W}while(Math.abs(S)>r.EPSILON12);return"undefined"==typeof t?new i(o*O,u*R,a*C):(t.x=o*O,t.y=u*R,t.z=a*C,t)},u.prototype.scaleToGeocentricSurface=function(e,t){if("undefined"==typeof e)throw new n("cartesian is required.");var r=e.x,o=e.y,u=e.z,a=this._oneOverRadiiSquared,f=1/Math.sqrt(r*r*a.x+o*o*a.y+u*u*a.z);return i.multiplyByScalar(e,f,t)},u.prototype.transformPositionToScaledSpace=function(e,t){return i.multiplyComponents(e,this._oneOverRadii,t)},u.prototype.equals=function(e){return this===e||"undefined"!=typeof e&&i.equals(this._radii,e._radii)},u.prototype.toString=function(){return this._radii.toString()},u}),define("Core/GeographicProjection",["./defaultValue","./Cartesian3","./Cartographic","./Ellipsoid"],function(e,t,n,r){"use strict";var i=function(t){this._ellipsoid=e(t,r.WGS84),this._semimajorAxis=this._ellipsoid.getMaximumRadius(),this._oneOverSemimajorAxis=1/this._semimajorAxis};return i.prototype.getEllipsoid=function(){return this._ellipsoid},i.prototype.project=function(e,n){var r=this._semimajorAxis,i=e.longitude*r,o=e.latitude*r,u=e.height;return"undefined"==typeof n?new t(i,o,u):(n.x=i,n.y=o,n.z=u,n)},i.prototype.unproject=function(e,t){var r=this._oneOverSemimajorAxis,i=e.x*r,o=e.y*r,u=e.z;return"undefined"==typeof t?new n(i,o,u):(t.longitude=i,t.latitude=o,t.height=u,t)},i}),define("Core/Enumeration",[],function(){"use strict";var e=function(e,t,n){if(this.value=e,this.name=t,"undefined"!=typeof n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r])};return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.name},e}),define("Core/Intersect",["./Enumeration"],function(e){"use strict";var t={OUTSIDE:new e(-1,"OUTSIDE"),INTERSECTING:new e(0,"INTERSECTING"),INSIDE:new e(1,"INSIDE")};return t}),define("Core/Interval",["./defaultValue"],function(e){"use strict";var t=function(t,n){this.start=e(t,0),this.stop=e(n,0)};return t}),define("Core/Matrix3",["./Cartesian3","./defaultValue","./DeveloperError","./freezeObject"],function(e,t,n,r){"use strict";var i=function(e,n,r,i,o,u,a,f,s){this[0]=t(e,0),this[1]=t(i,0),this[2]=t(a,0),this[3]=t(n,0),this[4]=t(o,0),this[5]=t(f,0),this[6]=t(r,0),this[7]=t(u,0),this[8]=t(s,0)};return i.clone=function(e,t){return"undefined"==typeof e?void 0:"undefined"==typeof t?new i(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t)},i.fromColumnMajorArray=function(e,t){if("undefined"==typeof e)throw new n("values parameter is required");return i.clone(e,t)},i.fromRowMajorArray=function(e,t){if("undefined"==typeof e)throw new n("values is required.");return"undefined"==typeof t?new i(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]):(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t)},i.fromQuaternion=function(e,t){if("undefined"==typeof e)throw new n("quaternion is required");var r=e.x*e.x,o=e.x*e.y,u=e.x*e.z,a=e.x*e.w,f=e.y*e.y,s=e.y*e.z,d=e.y*e.w,h=e.z*e.z,p=e.z*e.w,c=e.w*e.w,y=r-f-h+c,w=2*(o+p),l=2*(u-d),m=2*(o-p),g=-r+f-h+c,x=2*(s+a),q=2*(u+d),v=2*(s-a),z=-r-f+h+c;return"undefined"==typeof t?new i(y,w,l,m,g,x,q,v,z):(t[0]=y,t[1]=m,t[2]=q,t[3]=w,t[4]=g,t[5]=v,t[6]=l,t[7]=x,t[8]=z,t)},i.fromScale=function(e,t){if("undefined"==typeof e)throw new n("scale is required.");return"undefined"==typeof t?new i(e.x,0,0,0,e.y,0,0,0,e.z):(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t)},i.fromUniformScale=function(e,t){if("number"!=typeof e)throw new n("scale is required.");return"undefined"==typeof t?new i(e,0,0,0,e,0,0,0,e):(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t)},i.fromRotationX=function(e,t){if("undefined"==typeof e)throw new n("angle is required.");var r=Math.cos(e),o=Math.sin(e);return"undefined"==typeof t?new i(1,0,0,0,r,-o,0,o,r):(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=o,t[6]=0,t[7]=-o,t[8]=r,t)},i.fromRotationY=function(e,t){if("undefined"==typeof e)throw new n("angle is required.");var r=Math.cos(e),o=Math.sin(e);return"undefined"==typeof t?new i(r,0,o,0,1,0,-o,0,r):(t[0]=r,t[1]=0,t[2]=-o,t[3]=0,t[4]=1,t[5]=0,t[6]=o,t[7]=0,t[8]=r,t)},i.fromRotationZ=function(e,t){if("undefined"==typeof e)throw new n("angle is required.");var r=Math.cos(e),o=Math.sin(e);return"undefined"==typeof t?new i(r,-o,0,o,r,0,0,0,1):(t[0]=r,t[1]=o,t[2]=0,t[3]=-o,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t)},i.toArray=function(e,t){if("undefined"==typeof e)throw new n("matrix is required");return"undefined"==typeof t?[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t)},i.getElementIndex=function(e,t){if("number"!=typeof t||0>t||t>2)throw new n("row is required and must be 0, 1, or 2.");if("number"!=typeof e||0>e||e>2)throw new n("column is required and must be 0, 1, or 2.");return 3*e+t},i.getColumn=function(t,r,i){if("undefined"==typeof t)throw new n("matrix is required.");if("number"!=typeof r||0>r||r>2)throw new n("index is required and must be 0, 1, or 2.");var o=3*r,u=t[o],a=t[o+1],f=t[o+2];return"undefined"==typeof i?new e(u,a,f):(i.x=u,i.y=a,i.z=f,i)},i.setColumn=function(e,t,r,o){if("undefined"==typeof e)throw new n("matrix is required");if("undefined"==typeof r)throw new n("cartesian is required");if("number"!=typeof t||0>t||t>2)throw new n("index is required and must be 0, 1, or 2.");o=i.clone(e,o);var u=3*t;return o[u]=r.x,o[u+1]=r.y,o[u+2]=r.z,o},i.getRow=function(t,r,i){if("undefined"==typeof t)throw new n("matrix is required.");if("number"!=typeof r||0>r||r>2)throw new n("index is required and must be 0, 1, or 2.");var o=t[r],u=t[r+3],a=t[r+6];return"undefined"==typeof i?new e(o,u,a):(i.x=o,i.y=u,i.z=a,i)},i.setRow=function(e,t,r,o){if("undefined"==typeof e)throw new n("matrix is required");if("undefined"==typeof r)throw new n("cartesian is required");if("number"!=typeof t||0>t||t>2)throw new n("index is required and must be 0, 1, or 2.");return o=i.clone(e,o),o[t]=r.x,o[t+3]=r.y,o[t+6]=r.z,o},i.multiply=function(e,t,r){if("undefined"==typeof e)throw new n("left is required");if("undefined"==typeof t)throw new n("right is required");var o=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],u=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],a=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],f=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],d=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],h=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],p=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],c=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return"undefined"==typeof r?new i(o,f,h,u,s,p,a,d,c):(r[0]=o,r[1]=u,r[2]=a,r[3]=f,r[4]=s,r[5]=d,r[6]=h,r[7]=p,r[8]=c,r)},i.multiplyByVector=function(t,r,i){if("undefined"==typeof t)throw new n("matrix is required");if("undefined"==typeof r)throw new n("cartesian is required");var o=r.x,u=r.y,a=r.z,f=t[0]*o+t[3]*u+t[6]*a,s=t[1]*o+t[4]*u+t[7]*a,d=t[2]*o+t[5]*u+t[8]*a;return"undefined"==typeof i?new e(f,s,d):(i.x=f,i.y=s,i.z=d,i)},i.multiplyByScalar=function(e,t,r){if("undefined"==typeof e)throw new n("matrix is required");if("number"!=typeof t)throw new n("scalar is required and must be a number");return"undefined"==typeof r?new i(e[0]*t,e[3]*t,e[6]*t,e[1]*t,e[4]*t,e[7]*t,e[2]*t,e[5]*t,e[8]*t):(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r)},i.negate=function(e,t){if("undefined"==typeof e)throw new n("matrix is required");return"undefined"==typeof t?new i(-e[0],-e[3],-e[6],-e[1],-e[4],-e[7],-e[2],-e[5],-e[8]):(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t)},i.transpose=function(e,t){if("undefined"==typeof e)throw new n("matrix is required");var r=e[0],o=e[3],u=e[6],a=e[1],f=e[4],s=e[7],d=e[2],h=e[5],p=e[8];return"undefined"==typeof t?new i(r,a,d,o,f,h,u,s,p):(t[0]=r,t[1]=o,t[2]=u,t[3]=a,t[4]=f,t[5]=s,t[6]=d,t[7]=h,t[8]=p,t)},i.equals=function(e,t){return e===t||"undefined"!=typeof e&&"undefined"!=typeof t&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},i.equalsEpsilon=function(e,t,r){if("number"!=typeof r)throw new n("epsilon is required and must be a number");return e===t||"undefined"!=typeof e&&"undefined"!=typeof t&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},i.IDENTITY=r(new i(1,0,0,0,1,0,0,0,1)),i.COLUMN0ROW0=0,i.COLUMN0ROW1=1,i.COLUMN0ROW2=2,i.COLUMN1ROW0=3,i.COLUMN1ROW1=4,i.COLUMN1ROW2=5,i.COLUMN2ROW0=6,i.COLUMN2ROW1=7,i.COLUMN2ROW2=8,i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.toArray=function(e){return i.toArray(this,e)},i.prototype.getColumn=function(e,t){return i.getColumn(this,e,t)},i.prototype.setColumn=function(e,t,n){return i.setColumn(this,e,t,n)},i.prototype.getRow=function(e,t){return i.getRow(this,e,t)},i.prototype.setRow=function(e,t,n){return i.setRow(this,e,t,n)},i.prototype.multiply=function(e,t){return i.multiply(this,e,t)},i.prototype.multiplyByVector=function(e,t){return i.multiplyByVector(this,e,t)},i.prototype.multiplyByScalar=function(e,t){return i.multiplyByScalar(this,e,t)},i.prototype.negate=function(e){return i.negate(this,e)},i.prototype.transpose=function(e){return i.transpose(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,t){return i.equalsEpsilon(this,e,t)},i.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n"+"("+this[1]+", "+this[4]+", "+this[7]+")\n"+"("+this[2]+", "+this[5]+", "+this[8]+")"},i}),define("Core/RuntimeError",[],function(){"use strict";var e=function(e){this.name="RuntimeError",this.message=e,this.error=new Error,this.stack=this.error.stack};return e.prototype.toString=function(){var e=this.name+": "+this.message;return e+="undefined"!=typeof this.stack?"\n"+this.stack.toString():"\n"+this.error.toString()},e}),define("Core/Matrix4",["./Cartesian3","./Cartesian4","./defaultValue","./DeveloperError","./freezeObject","./Math","./Matrix3","./RuntimeError"],function(e,t,n,r,i,o,u,a){"use strict";var f=function(e,t,r,i,o,u,a,f,s,d,h,p,c,y,w,l){this[0]=n(e,0),this[1]=n(o,0),this[2]=n(s,0),this[3]=n(c,0),this[4]=n(t,0),this[5]=n(u,0),this[6]=n(d,0),this[7]=n(y,0),this[8]=n(r,0),this[9]=n(a,0),this[10]=n(h,0),this[11]=n(w,0),this[12]=n(i,0),this[13]=n(f,0),this[14]=n(p,0),this[15]=n(l,0)};f.clone=function(e,t){return"undefined"==typeof e?void 0:"undefined"==typeof t?new f(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t)},f.fromColumnMajorArray=function(e,t){if("undefined"==typeof e)throw new r("values parameter is required");return f.clone(e,t)},f.fromRowMajorArray=function(e,t){if("undefined"==typeof e)throw new r("values is required.");return"undefined"==typeof t?new f(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t)
},f.fromRotationTranslation=function(e,t,n){if("undefined"==typeof e)throw new r("rotation is required.");if("undefined"==typeof t)throw new r("translation is required.");return"undefined"==typeof n?new f(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1):(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=e[3],n[5]=e[4],n[6]=e[5],n[7]=0,n[8]=e[6],n[9]=e[7],n[10]=e[8],n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,n)},f.fromTranslation=function(e,t){return f.fromRotationTranslation(u.IDENTITY,e,t)},f.fromScale=function(e,t){if("undefined"==typeof e)throw new r("scale is required.");return"undefined"==typeof t?new f(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1):(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},f.fromUniformScale=function(e,t){if("number"!=typeof e)throw new r("scale is required.");return"undefined"==typeof t?new f(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1):(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)};var s=new e,d=new e,h=new e;f.fromCamera=function(t,n){if("undefined"==typeof t)throw new r("camera is required.");var i=t.eye,o=t.target,u=t.up;if("undefined"==typeof i)throw new r("camera.eye is required.");if("undefined"==typeof o)throw new r("camera.target is required.");if("undefined"==typeof u)throw new r("camera.up is required.");e.subtract(o,i,s).normalize(s),e.cross(s,u,d).normalize(d),e.cross(d,s,h).normalize(h);var a=d.x,p=d.y,c=d.z,y=s.x,w=s.y,l=s.z,m=h.x,g=h.y,x=h.z,q=i.x,v=i.y,z=i.z,b=a*-q+p*-v+c*-z,M=m*-q+g*-v+x*-z,S=y*q+w*v+l*z;return"undefined"==typeof n?new f(a,p,c,b,m,g,x,M,-y,-w,-l,S,0,0,0,1):(n[0]=a,n[1]=m,n[2]=-y,n[3]=0,n[4]=p,n[5]=g,n[6]=-w,n[7]=0,n[8]=c,n[9]=x,n[10]=-l,n[11]=0,n[12]=b,n[13]=M,n[14]=S,n[15]=1,n)},f.computePerspectiveFieldOfView=function(e,t,n,i,o){if(0>=e||e>Math.PI)throw new r("fovY must be in [0, PI).");if(0>=t)throw new r("aspectRatio must be greater than zero.");if(0>=n)throw new r("near must be greater than zero.");if(0>=i)throw new r("far must be greater than zero.");var u=Math.tan(.5*e),a=1/u,s=a/t,d=(i+n)/(n-i),h=2*i*n/(n-i);return"undefined"==typeof o?new f(s,0,0,0,0,a,0,0,0,0,d,h,0,0,-1,0):(o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=d,o[11]=-1,o[12]=0,o[13]=0,o[14]=h,o[15]=0,o)},f.computeOrthographicOffCenter=function(e,t,n,i,o,u,a){if("undefined"==typeof e)throw new r("left is required.");if("undefined"==typeof t)throw new r("right is required.");if("undefined"==typeof n)throw new r("bottom is required.");if("undefined"==typeof i)throw new r("top is required.");if("undefined"==typeof o)throw new r("near is required.");if("undefined"==typeof u)throw new r("far is required.");var s=1/(t-e),d=1/(i-n),h=1/(u-o),p=-(t+e)*s,c=-(i+n)*d,y=-(u+o)*h;return s*=2,d*=2,h*=-2,"undefined"==typeof a?new f(s,0,0,p,0,d,0,c,0,0,h,y,0,0,0,1):(a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=h,a[11]=0,a[12]=p,a[13]=c,a[14]=y,a[15]=1,a)},f.computePerspectiveOffCenter=function(e,t,n,i,o,u,a){if("undefined"==typeof e)throw new r("left is required.");if("undefined"==typeof t)throw new r("right is required.");if("undefined"==typeof n)throw new r("bottom is required.");if("undefined"==typeof i)throw new r("top is required.");if("undefined"==typeof o)throw new r("near is required.");if("undefined"==typeof u)throw new r("far is required.");var s=2*o/(t-e),d=2*o/(i-n),h=(t+e)/(t-e),p=(i+n)/(i-n),c=-(u+o)/(u-o),y=-1,w=-2*u*o/(u-o);return"undefined"==typeof a?new f(s,0,h,0,0,d,p,0,0,0,c,w,0,0,y,0):(a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=0,a[7]=0,a[8]=h,a[9]=p,a[10]=c,a[11]=y,a[12]=0,a[13]=0,a[14]=w,a[15]=0,a)},f.computeInfinitePerspectiveOffCenter=function(e,t,n,i,o,u){if("undefined"==typeof e)throw new r("left is required.");if("undefined"==typeof t)throw new r("right is required.");if("undefined"==typeof n)throw new r("bottom is required.");if("undefined"==typeof i)throw new r("top is required.");if("undefined"==typeof o)throw new r("near is required.");var a=2*o/(t-e),s=2*o/(i-n),d=(t+e)/(t-e),h=(i+n)/(i-n),p=-1,c=-1,y=-2*o;return"undefined"==typeof u?new f(a,0,d,0,0,s,h,0,0,0,p,y,0,0,c,0):(u[0]=a,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=s,u[6]=0,u[7]=0,u[8]=d,u[9]=h,u[10]=p,u[11]=c,u[12]=0,u[13]=0,u[14]=y,u[15]=0,u)},f.computeViewportTransformation=function(e,t,r,i){e=n(e,n.EMPTY_OBJECT);var o=n(e.x,0),u=n(e.y,0),a=n(e.width,0),s=n(e.height,0);t=n(t,0),r=n(r,1);var d=.5*a,h=.5*s,p=.5*(r-t),c=d,y=h,w=p,l=o+d,m=u+h,g=t+p,x=1;return"undefined"==typeof i?new f(c,0,0,l,0,y,0,m,0,0,w,g,0,0,0,x):(i[0]=c,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=y,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=w,i[11]=0,i[12]=l,i[13]=m,i[14]=g,i[15]=x,i)},f.toArray=function(e,t){if("undefined"==typeof e)throw new r("matrix is required");return"undefined"==typeof t?[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t)},f.getElementIndex=function(e,t){if("number"!=typeof t||0>t||t>3)throw new r("row is required and must be 0, 1, 2, or 3.");if("number"!=typeof e||0>e||e>3)throw new r("column is required and must be 0, 1, 2, or 3.");return 4*e+t},f.getColumn=function(e,n,i){if("undefined"==typeof e)throw new r("matrix is required.");if("number"!=typeof n||0>n||n>3)throw new r("index is required and must be 0, 1, 2, or 3.");var o=4*n,u=e[o],a=e[o+1],f=e[o+2],s=e[o+3];return"undefined"==typeof i?new t(u,a,f,s):(i.x=u,i.y=a,i.z=f,i.w=s,i)},f.setColumn=function(e,t,n,i){if("undefined"==typeof e)throw new r("matrix is required");if("undefined"==typeof n)throw new r("cartesian is required");if("number"!=typeof t||0>t||t>3)throw new r("index is required and must be 0, 1, 2, or 3.");i=f.clone(e,i);var o=4*t;return i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z,i[o+3]=n.w,i},f.getRow=function(e,n,i){if("undefined"==typeof e)throw new r("matrix is required.");if("number"!=typeof n||0>n||n>3)throw new r("index is required and must be 0, 1, 2, or 3.");var o=e[n],u=e[n+4],a=e[n+8],f=e[n+12];return"undefined"==typeof i?new t(o,u,a,f):(i.x=o,i.y=u,i.z=a,i.w=f,i)},f.setRow=function(e,t,n,i){if("undefined"==typeof e)throw new r("matrix is required");if("undefined"==typeof n)throw new r("cartesian is required");if("number"!=typeof t||0>t||t>3)throw new r("index is required and must be 0, 1, 2, or 3.");return i=f.clone(e,i),i[t]=n.x,i[t+4]=n.y,i[t+8]=n.z,i[t+12]=n.w,i},f.multiply=function(e,t,n){if("undefined"==typeof e)throw new r("left is required");if("undefined"==typeof t)throw new r("right is required");var i=e[0],o=e[1],u=e[2],a=e[3],s=e[4],d=e[5],h=e[6],p=e[7],c=e[8],y=e[9],w=e[10],l=e[11],m=e[12],g=e[13],x=e[14],q=e[15],v=t[0],z=t[1],b=t[2],M=t[3],S=t[4],E=t[5],O=t[6],R=t[7],C=t[8],_=t[9],T=t[10],P=t[11],I=t[12],N=t[13],U=t[14],A=t[15],L=i*v+s*z+c*b+m*M,W=o*v+d*z+y*b+g*M,B=u*v+h*z+w*b+x*M,V=a*v+p*z+l*b+q*M,D=i*S+s*E+c*O+m*R,H=o*S+d*E+y*O+g*R,j=u*S+h*E+w*O+x*R,k=a*S+p*E+l*O+q*R,F=i*C+s*_+c*T+m*P,G=o*C+d*_+y*T+g*P,Z=u*C+h*_+w*T+x*P,X=a*C+p*_+l*T+q*P,Y=i*I+s*N+c*U+m*A,J=o*I+d*N+y*U+g*A,Q=u*I+h*N+w*U+x*A,K=a*I+p*N+l*U+q*A;return"undefined"==typeof n?new f(L,D,F,Y,W,H,G,J,B,j,Z,Q,V,k,X,K):(n[0]=L,n[1]=W,n[2]=B,n[3]=V,n[4]=D,n[5]=H,n[6]=j,n[7]=k,n[8]=F,n[9]=G,n[10]=Z,n[11]=X,n[12]=Y,n[13]=J,n[14]=Q,n[15]=K,n)},f.multiplyByTranslation=function(e,t,n){if("undefined"==typeof e)throw new r("matrix is required");if("undefined"==typeof t)throw new r("translation is required");var i=t.x,o=t.y,u=t.z,a=i*e[0]+o*e[4]+u*e[8]+e[12],s=i*e[1]+o*e[5]+u*e[9]+e[13],d=i*e[2]+o*e[6]+u*e[10]+e[14];return"undefined"==typeof n?new f(e[0],e[4],e[8],a,e[1],e[5],e[9],s,e[2],e[6],e[10],d,e[3],e[7],e[11],e[15]):(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=a,n[13]=s,n[14]=d,n[15]=e[15],n)},f.multiplyByUniformScale=function(e,t,n){if("undefined"==typeof e)throw new r("matrix is required");if("number"!=typeof t)throw new r("scale is required");return 1===t?f.clone(e,n):"undefined"==typeof n?new f(t*e[0],t*e[4],t*e[8],e[12],t*e[1],t*e[5],t*e[9],e[13],t*e[2],t*e[6],t*e[10],e[14],0,0,0,1):(n[0]=t*e[0],n[1]=t*e[1],n[2]=t*e[2],n[3]=0,n[4]=t*e[4],n[5]=t*e[5],n[6]=t*e[6],n[7]=0,n[8]=t*e[8],n[9]=t*e[9],n[10]=t*e[10],n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=1,n)},f.multiplyByVector=function(e,n,i){if("undefined"==typeof e)throw new r("matrix is required");if("undefined"==typeof n)throw new r("cartesian is required");var o=n.x,u=n.y,a=n.z,f=n.w,s=e[0]*o+e[4]*u+e[8]*a+e[12]*f,d=e[1]*o+e[5]*u+e[9]*a+e[13]*f,h=e[2]*o+e[6]*u+e[10]*a+e[14]*f,p=e[3]*o+e[7]*u+e[11]*a+e[15]*f;return"undefined"==typeof i?new t(s,d,h,p):(i.x=s,i.y=d,i.z=h,i.w=p,i)};var p=new t(0,0,0,1);return f.multiplyByPoint=function(e,t,n){if("undefined"==typeof t)throw new r("cartesian is required");return p.x=t.x,p.y=t.y,p.z=t.z,f.multiplyByVector(e,p,n)},f.multiplyByScalar=function(e,t,n){if("undefined"==typeof e)throw new r("matrix is required");if("number"!=typeof t)throw new r("scalar is required and must be a number");return"undefined"==typeof n?new f(e[0]*t,e[4]*t,e[8]*t,e[12]*t,e[1]*t,e[5]*t,e[9]*t,e[13]*t,e[2]*t,e[6]*t,e[10]*t,e[14]*t,e[3]*t,e[7]*t,e[11]*t,e[15]*t):(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n)},f.negate=function(e,t){if("undefined"==typeof e)throw new r("matrix is required");return"undefined"==typeof t?new f(-e[0],-e[4],-e[8],-e[12],-e[1],-e[5],-e[9],-e[13],-e[2],-e[6],-e[10],-e[14],-e[3],-e[7],-e[11],-e[15]):(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t)},f.transpose=function(e,t){if("undefined"==typeof e)throw new r("matrix is required");if("undefined"==typeof t)return new f(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]);var n=e[1],i=e[2],o=e[3],u=e[6],a=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=u,t[10]=e[10],t[11]=e[14],t[12]=o,t[13]=a,t[14]=s,t[15]=e[15],t},f.equals=function(e,t){return e===t||"undefined"!=typeof e&&"undefined"!=typeof t&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},f.equalsEpsilon=function(e,t,n){if("number"!=typeof n)throw new r("epsilon is required and must be a number");return e===t||"undefined"!=typeof e&&"undefined"!=typeof t&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n&&Math.abs(e[9]-t[9])<=n&&Math.abs(e[10]-t[10])<=n&&Math.abs(e[11]-t[11])<=n&&Math.abs(e[12]-t[12])<=n&&Math.abs(e[13]-t[13])<=n&&Math.abs(e[14]-t[14])<=n&&Math.abs(e[15]-t[15])<=n},f.getTranslation=function(t,n){if("undefined"==typeof t)throw new r("matrix is required");return"undefined"==typeof n?new e(t[12],t[13],t[14]):(n.x=t[12],n.y=t[13],n.z=t[14],n)},f.getRotation=function(e,t){if("undefined"==typeof e)throw new r("matrix is required");return"undefined"==typeof t?new u(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t)},f.inverse=function(e,t){if("undefined"==typeof e)throw new r("matrix is required");var n=e[0],i=e[4],u=e[8],s=e[12],d=e[1],h=e[5],p=e[9],c=e[13],y=e[2],w=e[6],l=e[10],m=e[14],g=e[3],x=e[7],q=e[11],v=e[15],z=l*v,b=m*q,M=w*v,S=m*x,E=w*q,O=l*x,R=y*v,C=m*g,_=y*q,T=l*g,P=y*x,I=w*g,N=z*h+S*p+E*c-(b*h+M*p+O*c),U=b*d+R*p+T*c-(z*d+C*p+_*c),A=M*d+C*h+P*c-(S*d+R*h+I*c),L=O*d+_*h+I*p-(E*d+T*h+P*p),W=b*i+M*u+O*s-(z*i+S*u+E*s),B=z*n+C*u+_*s-(b*n+R*u+T*s),V=S*n+R*i+I*s-(M*n+C*i+P*s),D=E*n+T*i+P*u-(O*n+_*i+I*u);z=u*c,b=s*p,M=i*c,S=s*h,E=i*p,O=u*h,R=n*c,C=s*d,_=n*p,T=u*d,P=n*h,I=i*d;var H=z*x+S*q+E*v-(b*x+M*q+O*v),j=b*g+R*q+T*v-(z*g+C*q+_*v),k=M*g+C*x+P*v-(S*g+R*x+I*v),F=O*g+_*x+I*q-(E*g+T*x+P*q),G=M*l+O*m+b*w-(E*m+z*w+S*l),Z=_*m+z*y+C*l-(R*l+T*m+b*y),X=R*w+I*m+S*y-(P*m+M*y+C*w),Y=P*l+E*y+T*w-(_*w+I*l+O*y),J=n*N+i*U+u*A+s*L;if(Math.abs(J)<o.EPSILON20)throw new a("matrix is not invertible because its determinate is zero.");return J=1/J,"undefined"==typeof t?new f(N*J,W*J,H*J,G*J,U*J,B*J,j*J,Z*J,A*J,V*J,k*J,X*J,L*J,D*J,F*J,Y*J):(t[0]=N*J,t[1]=U*J,t[2]=A*J,t[3]=L*J,t[4]=W*J,t[5]=B*J,t[6]=V*J,t[7]=D*J,t[8]=H*J,t[9]=j*J,t[10]=k*J,t[11]=F*J,t[12]=G*J,t[13]=Z*J,t[14]=X*J,t[15]=Y*J,t)},f.inverseTransformation=function(e,t){if("undefined"==typeof e)throw new r("matrix is required");var n=e[0],i=e[1],o=e[2],u=e[4],a=e[5],s=e[6],d=e[8],h=e[9],p=e[10],c=e[12],y=e[13],w=e[14],l=-n*c-i*y-o*w,m=-u*c-a*y-s*w,g=-d*c-h*y-p*w;return"undefined"==typeof t?new f(n,i,o,l,u,a,s,m,d,h,p,g,0,0,0,1):(t[0]=n,t[1]=u,t[2]=d,t[3]=0,t[4]=i,t[5]=a,t[6]=h,t[7]=0,t[8]=o,t[9]=s,t[10]=p,t[11]=0,t[12]=l,t[13]=m,t[14]=g,t[15]=1,t)},f.IDENTITY=i(new f(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),f.COLUMN0ROW0=0,f.COLUMN0ROW1=1,f.COLUMN0ROW2=2,f.COLUMN0ROW3=3,f.COLUMN1ROW0=4,f.COLUMN1ROW1=5,f.COLUMN1ROW2=6,f.COLUMN1ROW3=7,f.COLUMN2ROW0=8,f.COLUMN2ROW1=9,f.COLUMN2ROW2=10,f.COLUMN2ROW3=11,f.COLUMN3ROW0=12,f.COLUMN3ROW1=13,f.COLUMN3ROW2=14,f.COLUMN3ROW3=15,f.prototype.clone=function(e){return f.clone(this,e)},f.prototype.toArray=function(e){return f.toArray(this,e)},f.prototype.getColumn=function(e,t){return f.getColumn(this,e,t)},f.prototype.setColumn=function(e,t,n){return f.setColumn(this,e,t,n)},f.prototype.getRow=function(e,t){return f.getRow(this,e,t)},f.prototype.setRow=function(e,t,n){return f.setRow(this,e,t,n)},f.prototype.multiply=function(e,t){return f.multiply(this,e,t)},f.prototype.multiplyByTranslation=function(e,t){return f.multiplyByTranslation(this,e,t)},f.prototype.multiplyByUniformScale=function(e,t){return f.multiplyByUniformScale(this,e,t)},f.prototype.multiplyByVector=function(e,t){return f.multiplyByVector(this,e,t)},f.prototype.multiplyByPoint=function(e,t){return f.multiplyByPoint(this,e,t)},f.prototype.multiplyByScalar=function(e,t){return f.multiplyByScalar(this,e,t)},f.prototype.negate=function(e){return f.negate(this,e)},f.prototype.transpose=function(e){return f.transpose(this,e)},f.prototype.equals=function(e){return f.equals(this,e)},f.prototype.equalsEpsilon=function(e,t){return f.equalsEpsilon(this,e,t)},f.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n"+"("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n"+"("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n"+"("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},f.prototype.getTranslation=function(e){return f.getTranslation(this,e)},f.prototype.getRotation=function(e){return f.getRotation(this,e)},f.prototype.inverse=function(e){return f.inverse(this,e)},f.prototype.inverseTransformation=function(e){return f.inverseTransformation(this,e)},f}),define("Core/BoundingSphere",["./defaultValue","./DeveloperError","./Cartesian3","./Cartesian4","./Cartographic","./Ellipsoid","./GeographicProjection","./Intersect","./Interval","./Matrix4"],function(e,t,n,r,i,o,u,a,f,s){"use strict";var d=function(t,r){this.center=n.clone(e(t,n.ZERO)),this.radius=e(r,0)},h=new n,p=new n,c=new n,y=new n,w=new n,l=new n,m=new n,g=new n,x=new n,q=new n,v=new n,z=new n;d.fromPoints=function(e,t){if("undefined"==typeof t&&(t=new d),"undefined"==typeof e||0===e.length)return t.center=n.ZERO.clone(t.center),t.radius=0,t;for(var r=n.clone(e[0],m),i=n.clone(r,h),o=n.clone(r,p),u=n.clone(r,c),a=n.clone(r,y),f=n.clone(r,w),s=n.clone(r,l),b=e.length,M=1;b>M;M++){n.clone(e[M],r);var S=r.x,E=r.y,O=r.z;S<i.x&&n.clone(r,i),S>a.x&&n.clone(r,a),E<o.y&&n.clone(r,o),E>f.y&&n.clone(r,f),O<u.z&&n.clone(r,u),O>s.z&&n.clone(r,s)}var R=n.magnitudeSquared(n.subtract(a,i,g)),C=n.magnitudeSquared(n.subtract(f,o,g)),_=n.magnitudeSquared(n.subtract(s,u,g)),T=i,P=a,I=R;C>I&&(I=C,T=o,P=f),_>I&&(I=_,T=u,P=s);var N=x;N.x=.5*(T.x+P.x),N.y=.5*(T.y+P.y),N.z=.5*(T.z+P.z);var U=n.magnitudeSquared(n.subtract(P,N,g)),A=Math.sqrt(U),L=q;L.x=i.x,L.y=o.y,L.z=u.z;var W=v;W.x=a.x,W.y=f.y,W.z=s.z;var B=n.multiplyByScalar(n.add(L,W,g),.5,z),V=0;for(M=0;b>M;M++){n.clone(e[M],r);var D=n.magnitude(n.subtract(r,B,g));D>V&&(V=D);var H=n.magnitudeSquared(n.subtract(r,N,g));if(H>U){var j=Math.sqrt(H);A=.5*(A+j),U=A*A;var k=j-A;N.x=(A*N.x+k*r.x)/j,N.y=(A*N.y+k*r.y)/j,N.z=(A*N.z+k*r.z)/j}}return V>A?(n.clone(N,t.center),t.radius=A):(n.clone(B,t.center),t.radius=V),t};var b=new u,M=new n,S=new n,E=new i,O=new i;d.fromExtent2D=function(e,t,n){return d.fromExtentWithHeights2D(e,t,0,0,n)},d.fromExtentWithHeights2D=function(t,r,i,o,u){if("undefined"==typeof u&&(u=new d),"undefined"==typeof t)return u.center=n.ZERO.clone(u.center),u.radius=0,u;r=e(r,b),t.getSouthwest(E),E.height=i,t.getNortheast(O),O.height=o;var a=r.project(E,M),f=r.project(O,S),s=f.x-a.x,h=f.y-a.y,p=f.z-a.z;u.radius=.5*Math.sqrt(s*s+h*h+p*p);var c=u.center;return c.x=a.x+.5*s,c.y=a.y+.5*h,c.z=a.z+.5*p,u};var R=[];d.fromExtent3D=function(t,n,r){n=e(n,o.WGS84);var i;return"undefined"!=typeof t&&(i=t.subsample(n,R)),d.fromPoints(i,r)},d.fromVertices=function(e,r,i,o){if("undefined"==typeof o&&(o=new d),"undefined"==typeof e||0===e.length)return o.center=n.ZERO.clone(o.center),o.radius=0,o;if("undefined"==typeof r&&(r=n.ZERO),"undefined"==typeof i&&(i=3),3>i)throw new t("stride must be 3 or greater.");var u=m;u.x=e[0]+r.x,u.y=e[1]+r.y,u.z=e[2]+r.z;for(var a=n.clone(u,h),f=n.clone(u,p),s=n.clone(u,c),b=n.clone(u,y),M=n.clone(u,w),S=n.clone(u,l),E=e.length,O=0;E>O;O+=i){var R=e[O]+r.x,C=e[O+1]+r.y,_=e[O+2]+r.z;u.x=R,u.y=C,u.z=_,R<a.x&&n.clone(u,a),R>b.x&&n.clone(u,b),C<f.y&&n.clone(u,f),C>M.y&&n.clone(u,M),_<s.z&&n.clone(u,s),_>S.z&&n.clone(u,S)}var T=n.magnitudeSquared(n.subtract(b,a,g)),P=n.magnitudeSquared(n.subtract(M,f,g)),I=n.magnitudeSquared(n.subtract(S,s,g)),N=a,U=b,A=T;P>A&&(A=P,N=f,U=M),I>A&&(A=I,N=s,U=S);var L=x;L.x=.5*(N.x+U.x),L.y=.5*(N.y+U.y),L.z=.5*(N.z+U.z);var W=n.magnitudeSquared(n.subtract(U,L,g)),B=Math.sqrt(W),V=q;V.x=a.x,V.y=f.y,V.z=s.z;var D=v;D.x=b.x,D.y=M.y,D.z=S.z;var H=n.multiplyByScalar(n.add(V,D,g),.5,z),j=0;for(O=0;E>O;O+=i){u.x=e[O]+r.x,u.y=e[O+1]+r.y,u.z=e[O+2]+r.z;var k=n.magnitude(n.subtract(u,H,g));k>j&&(j=k);var F=n.magnitudeSquared(n.subtract(u,L,g));if(F>W){var G=Math.sqrt(F);B=.5*(B+G),W=B*B;var Z=G-B;L.x=(B*L.x+Z*u.x)/G,L.y=(B*L.y+Z*u.y)/G,L.z=(B*L.z+Z*u.z)/G}}return j>B?(n.clone(L,o.center),o.radius=B):(n.clone(H,o.center),o.radius=j),o},d.fromCornerPoints=function(e,r,i){if("undefined"==typeof e||"undefined"==typeof r)throw new t("corner and oppositeCorner are required.");"undefined"==typeof i&&(i=new d);var o=i.center;return n.add(e,r,o),n.multiplyByScalar(o,.5,o),i.radius=n.distance(o,r),i},d.clone=function(e,t){return"undefined"==typeof e?void 0:"undefined"==typeof t?new d(e.center,e.radius):(t.center=n.clone(e.center,t.center),t.radius=e.radius,t)};var C=new n,_=new n;d.union=function(e,r,i){if("undefined"==typeof e)throw new t("left is required.");if("undefined"==typeof r)throw new t("right is required.");"undefined"==typeof i&&(i=new d);var o=e.center,u=r.center;n.add(o,u,_);var a=n.multiplyByScalar(_,.5,_),f=n.subtract(o,a,C).magnitude()+e.radius,s=n.subtract(u,a,C).magnitude()+r.radius;return i.radius=Math.max(f,s),n.clone(a,i.center),i};var T=new n;d.expand=function(e,r,i){if("undefined"==typeof e)throw new t("sphere is required.");if("undefined"==typeof r)throw new t("point is required.");i=d.clone(e,i);var o=n.subtract(r,i.center,T).magnitude();return o>i.radius&&(i.radius=o),i},d.intersect=function(e,r){if("undefined"==typeof e)throw new t("sphere is required.");if("undefined"==typeof r)throw new t("plane is required.");var i=e.center,o=e.radius,u=n.dot(r,i)+r.w;return-o>u?a.OUTSIDE:o>u?a.INTERSECTING:a.INSIDE};var P=r.UNIT_W.clone();d.transform=function(e,r,i){if("undefined"==typeof e)throw new t("sphere is required.");if("undefined"==typeof r)throw new t("transform is required.");return"undefined"==typeof i&&(i=new d),s.multiplyByPoint(r,e.center,P),n.clone(P,i.center),i.radius=e.radius,i};var I=new n;return d.getPlaneDistances=function(e,r,i,o){if("undefined"==typeof e)throw new t("sphere is required.");if("undefined"==typeof r)throw new t("position is required.");if("undefined"==typeof i)throw new t("direction is required.");"undefined"==typeof o&&(o=new f);var u=n.subtract(e.center,r,I),a=n.multiplyByScalar(i,i.dot(u),I),s=a.magnitude();return o.start=s-e.radius,o.stop=s+e.radius,o},d.equals=function(e,t){return e===t||"undefined"!=typeof e&&"undefined"!=typeof t&&n.equals(e.center,t.center)&&e.radius===t.radius},d.prototype.clone=function(e){return d.clone(this,e)},d.prototype.union=function(e,t){return d.union(this,e,t)},d.prototype.expand=function(e,t){return d.expand(this,e,t)},d.prototype.intersect=function(e){return d.intersect(this,e)},d.prototype.transform=function(e,t){return d.transform(this,e,t)},d.prototype.getPlaneDistances=function(e,t,n){return d.getPlaneDistances(this,e,t,n)},d.prototype.equals=function(e){return d.equals(this,e)},d}),define("Core/EllipsoidalOccluder",["./defaultValue","./DeveloperError","./Cartesian3","./BoundingSphere"],function(e,t,n,r){"use strict";function i(e,t,n){var r=e.transformPositionToScaledSpace(t,h),i=r.magnitudeSquared(),o=Math.sqrt(i),u=r.divideByScalar(o,p);i=Math.max(1,i),o=Math.max(1,o);var a=u.dot(n),f=u.cross(n).magnitude(),s=1/o,d=Math.sqrt(i-1)*s;return 1/(a*s-f*d)}function o(e,t,n){return 0>=t||t===1/0||t!==t?void 0:e.multiplyByScalar(t,n)}function u(e,t){return e.transformPositionToScaledSpace(t,c),c.normalize(c)}var a=function(e,r){if("undefined"==typeof e)throw new t("ellipsoid is required.");this._ellipsoid=e,this._cameraPosition=new n,this._cameraPositionInScaledSpace=new n,this._distanceToLimbInScaledSpaceSquared=0,"undefined"!=typeof r&&this.setCameraPosition(r)};a.prototype.getEllipsoid=function(){return this._ellipsoid},a.prototype.setCameraPosition=function(e){var t=this._ellipsoid,r=t.transformPositionToScaledSpace(e,this._cameraPositionInScaledSpace),i=n.magnitudeSquared(r)-1;n.clone(e,this._cameraPosition),this._cameraPositionInScaledSpace=r,this._distanceToLimbInScaledSpaceSquared=i},a.prototype.getCameraPosition=function(){return this._cameraPosition};var f=new n;a.prototype.isPointVisible=function(e){var t=this._ellipsoid,n=t.transformPositionToScaledSpace(e,f);return this.isScaledSpacePointVisible(n)},a.prototype.isScaledSpacePointVisible=function(e){var t=this._cameraPositionInScaledSpace,r=this._distanceToLimbInScaledSpaceSquared,i=n.subtract(e,t,f),o=-i.dot(t),u=o>r&&o*o/i.magnitudeSquared()>r;return!u},a.prototype.computeHorizonCullingPoint=function(e,n,r){if("undefined"==typeof e)throw new t("directionToPoint is required");if("undefined"==typeof n)throw new t("positions is required");for(var a=this._ellipsoid,f=u(a,e),s=0,d=0,h=n.length;h>d;++d){var p=n[d],c=i(a,p,f);s=Math.max(s,c)}return o(f,s,r)};var s=new n;a.prototype.computeHorizonCullingPointFromVertices=function(r,a,f,d,h){if("undefined"==typeof r)throw new t("directionToPoint is required");if("undefined"==typeof a)throw new t("vertices is required");if("undefined"==typeof f)throw new t("stride is required");d=e(d,n.ZERO);for(var p=this._ellipsoid,c=u(p,r),y=0,w=0,l=a.length;l>w;w+=f){s.x=a[w]+d.x,s.y=a[w+1]+d.y,s.z=a[w+2]+d.z;var m=i(p,s,c);y=Math.max(y,m)}return o(c,y,h)};var d=[];a.prototype.computeHorizonCullingPointFromExtent=function(e,n,i){if("undefined"==typeof e)throw new t("extent is required.");var o=e.subsample(n,d),u=r.fromPoints(o);return u.center.magnitude()<.1*n.getMinimumRadius()?void 0:this.computeHorizonCullingPoint(u.center,o,i)};var h=new n,p=new n,c=new n;return a}),define("Core/Extent",["./freezeObject","./defaultValue","./Ellipsoid","./Cartographic","./DeveloperError","./Math"],function(e,t,n,r,i,o){"use strict";var u=function(e,n,r,i){this.west=t(e,0),this.south=t(n,0),this.east=t(r,0),this.north=t(i,0)};u.fromCartographicArray=function(e,t){if("undefined"==typeof e)throw new i("cartographics is required.");for(var n=Number.MAX_VALUE,r=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE,f=0,s=e.length;s>f;f++){var d=e[f];n=Math.min(n,d.longitude),r=Math.max(r,d.longitude),o=Math.min(o,d.latitude),a=Math.max(a,d.latitude)}return"undefined"==typeof t?new u(n,o,r,a):(t.west=n,t.south=o,t.east=r,t.north=a,t)},u.clone=function(e,t){return"undefined"==typeof e?void 0:"undefined"==typeof t?new u(e.west,e.south,e.east,e.north):(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t)},u.prototype.clone=function(e){return u.clone(this,e)},u.prototype.equals=function(e){return"undefined"!=typeof e&&this.west===e.west&&this.south===e.south&&this.east===e.east&&this.north===e.north},u.prototype.equalsEpsilon=function(e,t){if("number"!=typeof t)throw new i("epsilon is required and must be a number.");return"undefined"!=typeof e&&Math.abs(this.west-e.west)<=t&&Math.abs(this.south-e.south)<=t&&Math.abs(this.east-e.east)<=t&&Math.abs(this.north-e.north)<=t},u.prototype.validate=function(){var e=this.north;if("number"!=typeof e)throw new i("north is required to be a number.");if(e<-o.PI_OVER_TWO||e>o.PI_OVER_TWO)throw new i("north must be in the interval [-Pi/2, Pi/2].");var t=this.south;if("number"!=typeof t)throw new i("south is required to be a number.");if(t<-o.PI_OVER_TWO||t>o.PI_OVER_TWO)throw new i("south must be in the interval [-Pi/2, Pi/2].");var n=this.west;if("number"!=typeof n)throw new i("west is required to be a number.");if(n<-Math.PI||n>Math.PI)throw new i("west must be in the interval [-Pi, Pi].");var r=this.east;if("number"!=typeof r)throw new i("east is required to be a number.");if(r<-Math.PI||r>Math.PI)throw new i("east must be in the interval [-Pi, Pi].")},u.prototype.getSouthwest=function(e){return"undefined"==typeof e?new r(this.west,this.south):(e.longitude=this.west,e.latitude=this.south,e.height=0,e)},u.prototype.getNorthwest=function(e){return"undefined"==typeof e?new r(this.west,this.north):(e.longitude=this.west,e.latitude=this.north,e.height=0,e)},u.prototype.getNortheast=function(e){return"undefined"==typeof e?new r(this.east,this.north):(e.longitude=this.east,e.latitude=this.north,e.height=0,e)},u.prototype.getSoutheast=function(e){return"undefined"==typeof e?new r(this.east,this.south):(e.longitude=this.east,e.latitude=this.south,e.height=0,e)},u.prototype.getCenter=function(e){return"undefined"==typeof e?new r(.5*(this.west+this.east),.5*(this.south+this.north)):(e.longitude=.5*(this.west+this.east),e.latitude=.5*(this.south+this.north),e.height=0,e)},u.prototype.intersectWith=function(e,t){if("undefined"==typeof e)throw new i("otherExtent is required.");var n=Math.max(this.west,e.west),r=Math.max(this.south,e.south),o=Math.min(this.east,e.east),a=Math.min(this.north,e.north);return"undefined"==typeof t?new u(n,r,o,a):(t.west=n,t.south=r,t.east=o,t.north=a,t)},u.prototype.contains=function(e){if("undefined"==typeof e)throw new i("cartographic is required.");return e.longitude>=this.west&&e.longitude<=this.east&&e.latitude>=this.south&&e.latitude<=this.north},u.prototype.isEmpty=function(){return this.west>=this.east||this.south>=this.north};var a=new r;return u.prototype.subsample=function(e,r){e=t(e,n.WGS84),"undefined"==typeof r&&(r=[]);var i=0,u=this.north,f=this.south,s=this.east,d=this.west,h=a;h.longitude=d,h.latitude=u,r[i]=e.cartographicToCartesian(h,r[i]),i++,h.longitude=s,r[i]=e.cartographicToCartesian(h,r[i]),i++,h.latitude=f,r[i]=e.cartographicToCartesian(h,r[i]),i++,h.longitude=d,r[i]=e.cartographicToCartesian(h,r[i]),i++,h.latitude=0>u?u:f>0?f:0;for(var p=1;8>p;++p){var c=-Math.PI+p*o.PI_OVER_TWO;c>d&&s>c&&(h.longitude=c,r[i]=e.cartographicToCartesian(h,r[i]),i++)}return 0===h.latitude&&(h.longitude=d,r[i]=e.cartographicToCartesian(h,r[i]),i++,h.longitude=s,r[i]=e.cartographicToCartesian(h,r[i]),i++),r.length=i,r},u.MAX_VALUE=e(new u(-Math.PI,-o.PI_OVER_TWO,Math.PI,o.PI_OVER_TWO)),u}),define("Core/HeightmapTessellator",["./defaultValue","./freezeObject","./DeveloperError","./Cartesian3","./Ellipsoid","./Math"],function(e,t,n,r,i,o){"use strict";var u={};return u.DEFAULT_STRUCTURE=t({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}),u.computeVertices=function(t){if("undefined"==typeof t||"undefined"==typeof t.heightmap)throw new n("description.heightmap is required.");if("undefined"==typeof t.width||"undefined"==typeof t.height)throw new n("description.width and description.height are required.");if("undefined"==typeof t.vertices)throw new n("description.vertices is required.");if("undefined"==typeof t.nativeExtent)throw new n("description.nativeExtent is required.");if("undefined"==typeof t.skirtHeight)throw new n("description.skirtHeight is required.");var a,f,s,d,h=Math.cos,p=Math.sin,c=Math.sqrt,y=Math.atan,w=Math.exp,l=o.PI_OVER_TWO,m=o.toRadians,g=t.vertices,x=t.heightmap,q=t.width,v=t.height,z=t.skirtHeight,b=e(t.isGeographic,!0),M=e(t.ellipsoid,i.WGS84),S=1/M.getMaximumRadius(),E=t.nativeExtent,O=t.extent;"undefined"==typeof O?b?(a=m(E.west),f=m(E.south),s=m(E.east),d=m(E.north)):(a=E.west*S,f=l-2*y(w(-E.south*S)),s=E.east*S,d=l-2*y(w(-E.north*S))):(a=O.west,f=O.south,s=O.east,d=O.north);var R=e(t.relativeToCenter,r.ZERO),C=e(t.structure,u.DEFAULT_STRUCTURE),_=e(C.heightScale,u.DEFAULT_STRUCTURE.heightScale),T=e(C.heightOffset,u.DEFAULT_STRUCTURE.heightOffset),P=e(C.elementsPerHeight,u.DEFAULT_STRUCTURE.elementsPerHeight),I=e(C.stride,u.DEFAULT_STRUCTURE.stride),N=e(C.elementMultiplier,u.DEFAULT_STRUCTURE.elementMultiplier),U=e(C.isBigEndian,u.DEFAULT_STRUCTURE.isBigEndian),A=(E.east-E.west)/(q-1),L=(E.north-E.south)/(v-1),W=M.getRadiiSquared(),B=W.x,V=W.y,D=W.z,H=0,j=65536,k=-65536,F=0,G=v,Z=0,X=q;z>0&&(--F,++G,--Z,++X);for(var Y=F;G>Y;++Y){var J=Y;0>J&&(J=0),J>=v&&(J=v-1);var Q=E.north-L*J;Q=b?m(Q):l-2*y(w(-Q*S));for(var K=h(Q),$=p(Q),et=D*$,tt=(Q-f)/(d-f),nt=Z;X>nt;++nt){var rt=nt;0>rt&&(rt=0),rt>=q&&(rt=q-1);var it=E.west+A*rt;b?it=m(it):it*=S;var ot,ut=J*q*I+rt*I;if(1===P)ot=x[ut];else{ot=0;var at;if(U)for(at=0;P>at;++at)ot=ot*N+x[ut+at];else for(at=P-1;at>=0;--at)ot=ot*N+x[ut+at]}ot=ot*_+T,k=Math.max(k,ot),j=Math.min(j,ot),(nt!==rt||Y!==J)&&(ot-=z);var ft=K*h(it),st=K*p(it),dt=B*ft,ht=V*st,pt=c(dt*ft+ht*st+et*$),ct=1/pt,yt=dt*ct,wt=ht*ct,lt=et*ct;g[H++]=yt+ft*ot-R.x,g[H++]=wt+st*ot-R.y,g[H++]=lt+$*ot-R.z,g[H++]=ot;var mt=(it-a)/(s-a);g[H++]=mt,g[H++]=tt}}return{maximumHeight:k,minimumHeight:j}},u}),define("Workers/createTaskProcessorWorker",[],function(){"use strict";var e=function(e){var t,n=[],r={id:void 0,result:void 0};return function(i){var o=i.data;r.id=o.id,n.length=0,r.result=e(o.parameters,n),"undefined"==typeof t&&(t="undefined"!=typeof self.webkitPostMessage?self.webkitPostMessage:self.postMessage),t(r,n)}};return e}),define("Workers/createVerticesFromHeightmap",["../Core/BoundingSphere","../Core/Ellipsoid","../Core/EllipsoidalOccluder","../Core/Extent","../Core/HeightmapTessellator","./createTaskProcessorWorker"],function(e,t,n,r,i,o){"use strict";function u(o,u){var a=6,f=o.width,s=o.height;o.skirtHeight>0&&(f+=2,s+=2);var d=new Float32Array(f*s*a);u.push(d.buffer),o.ellipsoid=t.clone(o.ellipsoid),o.extent=r.clone(o.extent),o.vertices=d;var h=i.computeVertices(o),p=e.fromVertices(d,o.relativeToCenter,a),c=o.ellipsoid,y=new n(c),w=y.computeHorizonCullingPointFromVertices(o.relativeToCenter,d,a,o.relativeToCenter);return{vertices:d.buffer,numberOfAttributes:a,minimumHeight:h.minimumHeight,maximumHeight:h.maximumHeight,gridWidth:f,gridHeight:s,boundingSphere3D:p,occludeePointInScaledSpace:w}}return o(u)})}();